name: todo-app
version: 1.0.0
description: Simple Todo Application with Go backend, Vue frontend and PostgreSQL database

# ============================
# CONFIGURASI BACKEND
# ============================
container:
  image: ghcr.io/username/todo-backend:latest     # GANTI dengan image backend Anda
  port: 8080

resources:
  cpu: 500m
  memory: 512Mi
  replicas: 1

env:
  - name: DB_HOST
    value: ${POSTGRES_HOST}
  - name: DB_PORT
    value: ${POSTGRES_PORT}
  - name: DB_USER
    value: ${POSTGRES_USER}
  - name: DB_PASSWORD
    value: ${POSTGRES_PASSWORD}
  - name: DB_DATABASE
    value: ${POSTGRES_DB}

# ============================
# DATABASE POSTGRES
# ============================
dependencies:
  - type: POSTGRES
    name: todo-postgres
    version: "13"
    plan: free

# ============================
# DOMAIN APLIKASI
# ============================
domain: todo.deployaja.id

# ============================
# MAPPING ENV KE DATABASE
# ============================
envMap:
  POSTGRES_HOST: POSTGRES_HOST
  POSTGRES_PORT: POSTGRES_PORT
  POSTGRES_USER: POSTGRES_USER
  POSTGRES_PASSWORD: POSTGRES_PASSWORD
  POSTGRES_DB: POSTGRES_DATABASE
